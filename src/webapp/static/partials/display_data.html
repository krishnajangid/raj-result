<div ng-show="have_case">
    <section>
        <div ng-show="show_loader" id="load"></div>
        <md-content style="margin-top: 70px">
            <div flex-xs>
                <md-card class="layout-padding">
                    <form name="case_form" ng-submit="get_cases()">
                        <md-title flex="">
                            <a href="https://app.unicourt.com/researcher/case/detail/{{ case_dict.case_key }}"
                               class="md-headline" target="_blank" style="color:#337ab7;">
                                {{ case_dict.case_name }}
                            </a>
                            <u><a href="{{ case_dict.codaxtr_link }}" target="_blank"
                                  style="color:#337ab7;font-size:12px">(CODAXTR)</a></u>
                        </md-title>
                        <div layout="row" layout-align="space-between center " layout-xs="column " layout-sm="column"
                             class="pt-0 mt-0">
                            <div flex="80">
                                <span>Case Number: <b class="pr-2">{{ case_dict.case_number }}</b></span>
                                <span>({{ case_dict.state_key }} - {{ case_dict.county_key }})</span>
                                <span class="mr-2 ml-2"
                                      title="Codaxtr Created Date: {{ case_dict.codaxtr_created_date }}">
                            <span>Filed: <b>{{ case_dict.codaxtr_filing_date }}</b></span>
                        </span>
                                &nbsp;<span>Created: <b>{{ case_dict.created_date }}</b></span>
                            </div>
                            <div flex="20" layout="row" class="pt-0 mt-0">
                                <span class="layout-padding" flex>Is this a valid case?</span>
                                <md-select style="margin: 0" flex ng-model="case_dict.is_collectible"
                                           aria-label="collectible">
                                    <md-option value="YES">Yes</md-option>
                                    <md-option value="NO">No</md-option>
                                    <md-option value="DOUBT">Not Sure</md-option>
                                </md-select>
                            </div>
                        </div>
                        <md-divider></md-divider>
                        <div layout="row" class="mt-2">
                            <span>Do you want more documents ?</span>
                            <md-radio-group layout="row" ng-model="case_dict.status">
                                <md-radio-button value="No" class="md-primary ml-2">Yes</md-radio-button>
                                <md-radio-button value="Yes"> No</md-radio-button>
                            </md-radio-group>
                        </div>
                        <div class="row pl-3 mt-1">
                            <small flex-gt-xs="13" class="rounded pt-2 py-2">
                                Select <b>Yes</b> if you want more document. Select <b>No</b> if you found all
                                information.
                            </small>
                            <div flex-gt-xs="">
                                <md-button type="submit" class="md-raised md-primary float-right"
                                           ng-disabled="!case_dict.status">
                                    Next
                                </md-button>
                            </div>
                        </div>
                        <div>
                            <input type="hidden" ng-model="case_dict.next_item_index" name="next_item_index">
                            <input type="hidden" ng-model="case_dict.case_key" name="case_key">
                            <input type="hidden" ng-model="case_dict.document_id" name="document_id">
                            <input type="hidden" ng-model="case_dict.process_case_id" name="process_case_id">
                        </div>
                    </form>
                </md-card>
            </div>
        </md-content>
    </section>
    {{name}}
    <section>
        <md-card class="" layout-xs="column" layout="row">
            <div flex-xs flex-gt-xs="50" layout="column">
                <div layout-padding>
                    <div class="pt-2">
                        <a href="{{case_dict.document_url}}" class="text-dark" target="_blank"> <b>{{ case_dict.name
                            }}</b></a>
                        <br><small>{{ case_dict.description }}</small>
                        <br><small>{{ case_dict.filename }}</small>
                        <small ng-show="show_file_name">File Name:- <b>{{ case_dict.file_path }}</b></small>
                    </div>
                    <div class="embed-responsive embed-responsive z-depth-1-5" id="iframe_div_id"
                         style="height:100vh">
                        <iframe ng-src="{{ trustSrc(case_dict.document_url) }}" class="w-100 " id="document_frame"
                                frameborder="1"></iframe>
                    </div>
                </div>
            </div>
            <div flex-xs flex-gt-xs="50" layout="column">
                <div layout-padding>
                    <span class="md-headline layout-padding">Party Information</span>
                    <md-divider class="mt-2"></md-divider>
                    <div class="w-100" ng-show="party_div_visible">
                        <div class="d-flex justify-content-center" ng-show="load_parties_spinner">
                            <img src="static/img/LoadingSmall.gif"></div>
                        <accordion class="mb-0 pb-0">
                            <div ng-repeat="parties in parties_dict.parties" class="card"
                                 ng-click="get_party_potential(parties.party_id)">
                                <accordion-group is-open="status.open" ng-form="oform">
                                    <accordion-heading>
                                        <h6 class="cursor-pointer pl-2 pt-2 mb-0 pb-0 text-dark">
                                            {{ parties.party_fullname }} ({{ parties.party_type }})
                                            <div class="pull-right pr-2">
                                                <i class="fa"
                                                   data-ng-class="{'fa-chevron-down': status.open, 'fa-chevron-right': !status.open}"></i>
                                            </div>
                                        </h6>
                                    </accordion-heading>
                                    <div class="d-flex justify-content-center" ng-show="load_potential_spinner"><img
                                            src="static/img/LoadingSmall.gif"></div>
                                    <div class="">
                                        <table class="md-table  md-table-vert table table-hover table-sm w-100 "
                                               md-colresize="md-colresize">
                                            <tr ng-repeat="party_potential_dict in party_potential_list_dict.potentials"
                                                class="p-2">
                                                <td class="cursor-pointer pl-4">
                                                    {{ party_potential_dict.address }}, {{ party_potential_dict.city }},
                                                    {{party_potential_dict.state }}
                                                </td>
                                                <td>
                                                    <i ng-if="party_potential_dict.court_verified=='yes'"
                                                       class="fa fa-user text-success" title="Actual"></i>
                                                    <i ng-if="party_potential_dict.court_verified=='no'"
                                                       class="fa fa-user text-danger" title="Not Actual"></i>
                                                </td>
                                                <td class="text-right">
                                                    <md-button class="md-button md-mini md-primary pt-0 mt-0 p-0 m-0"
                                                               aria-label="edit"
                                                               ng-click='edit_potential(party_potential_dict.potential_id, party_potential_list_dict.party_id, parties.party_fullname)'>
                                                        <i class="fa fa-edit"></i>
                                                    </md-button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <md-button type="submit" class="md-button md-mini md-raised md-primary mb-4"
                                                   ng-show="add_btn_on_load"
                                                   ng-click="add_potential(parties.party_id, parties.party_fullname);">
                                            Add New Potential
                                        </md-button>
                                    </div>
                                </accordion-group>
                            </div>
                            <md-button type="submit" ng-show="has_more_party" ng-disabled="load_btn_isDisabled"
                                       class="md-button md-raised btn-secondary mt-4 float-right"
                                       ng-click="get_parties(true)">
                                <span ng-show="load_parties_btn_spinner"> <i
                                        class="fa fa-refresh fa-spin ml-2"></i> </span>Load More
                            </md-button>
                        </accordion>
                    </div>
                </div>
                <div class="mx-3 mt-3 " layout="column" ng-show="potential_div_visible">
                    <h5><b class="mr-2 pl-2" ng-bind="party_fullname"></b></h5>
                    <md-content style="height:100vh;overflow-y: scroll;" class="z-depth-1-5 mt-4">
                        <form name="potential_form" class="pb-4 md-inline-form " ng-submit="save_potential()">
                            <md-content class="px-4 pt-4">
                                <fieldset ng-disabled="disabled_form">
                                    <div>
                                        <md-input-container class="md-block">
                                            <label>Address</label>
                                            <input ng-model="potential_dict.address" required ng-maxlength="200"
                                                   ng-disabled="should_disable_address">
                                        </md-input-container>
                                        <div layout-gt-sm="row">
                                            <md-input-container class="md-block" flex-gt-sm="30">
                                                <label>City</label>
                                                <input ng-model="potential_dict.city" required required
                                                       ng-pattern="/^[a-zA-Z ]*$/" ng-maxlength="50"
                                                       ng-disabled="should_disable_city">
                                            </md-input-container>
                                            <md-input-container class="md-block" flex-gt-sm="25">
                                                <label>State</label>
                                                <input ng-model="potential_dict.state" required
                                                       ng-pattern="/^[a-zA-Z]{2}$/" ng-disabled="should_disable_state">
                                            </md-input-container>
                                            <md-input-container class="md-block" flex-gt-sm>
                                                <label>Zip Code</label>
                                                <input name="zip_code" ng-model="potential_dict.zipcode"
                                                       placeholder="11111-1111"
                                                       ng-pattern="/^[0-9]{5}$|^[0-9]{5}-([0-9]{3}|[0-9]{4})$/"
                                                       required md-maxlength="10" ng-disabled="should_disable_zipcode">
                                            </md-input-container>
                                            <md-input-container class="md-block " flex-gt-sm ng-show="show_is_actual"
                                                                ng-disabled="should_disable_is_actual">
                                                <label>Is actual</label>
                                                <md-select ng-model="potential_dict.court_verified">
                                                    <md-option value="yes">Yes</md-option>
                                                    <md-option value="no">No</md-option>
                                                </md-select>
                                            </md-input-container>
                                        </div>
                                        <div layout-gt-sm="row">
                                            <label>Email Details
                                                <md-button class=" md-button  ml-4" ng-click="is_email_visible=true"
                                                           aria-label="add new email">
                                                    <i class="fa fa-plus"></i>
                                                </md-button>
                                            </label>
                                        </div>
                                        <div layout-gt-sm="row" ng-show="is_email_visible">
                                            <md-input-container class="md-block " flex>
                                                <label>Email</label>
                                                <input ng-model="potential_dict.email" type="email"
                                                       ng-pattern="/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/">
                                            </md-input-container>
                                        </div>
                                        <div layout-gt-sm="row">
                                            <label>Phone Details
                                                <md-button class=" md-button  ml-3" ng-click="add_phone_field()"
                                                           aria-label="add new phone">
                                                    <i class="fa fa-plus"></i>
                                                </md-button>
                                            </label>
                                        </div>
                                        <div layout-gt-sm="row" data-ng-repeat="phone_field in phone_field_list">
                                            <md-input-container class="md-block " flex-gt-sm>
                                                <label>Phone</label>
                                                <input ng-model="phone_field_list[$index].num" type="text"
                                                       ng-pattern="/^[\\+\\\-\\(\\)0-9\\s]{5,}$/">
                                            </md-input-container>
                                            <md-input-container class="md-block " flex-gt-sm>
                                                <label>Type</label>
                                                <input ng-init="phone_field_list[$index].type = phone_field_list[$index].type || 'default'"
                                                       ng-model="phone_field_list[$index].type" type="text"
                                                       ng-pattern="/^[a-zA-Z ]*$/">
                                            </md-input-container>
                                        </div>
                                    </div>
                            </md-content>
                            <input type="hidden" ng-model="hidden_party_id"/>
                            <input type="hidden" ng-model="hidden_potential_id"/>
                            <input type="hidden" ng-model="party_fullname"/>
                            </fieldset>
                            <md-card-actions class="">
                                <md-button type="submit" class="md-raised md-primary btn-success"
                                           aria-label="submit potential"
                                           ng-disabled="potential_form.$invalid" ng-show="is_staff_user">
                                    Submit
                                </md-button>
                                <md-button ng-click="potential_div_visible=false;party_div_visible=true;"
                                           class="md-warn md-raised  md-button md-ink-ripple"
                                           aria-label="cancel potential">
                                    Cancel
                                </md-button>
                            </md-card-actions>
                        </form>
                    </md-content>
                </div>
            </div>
        </md-card>
        <div class="alert alert-success" id="display_message" ng-show="success_message">
            Potential Saved Successfully..!
        </div>
    </section>
</div>